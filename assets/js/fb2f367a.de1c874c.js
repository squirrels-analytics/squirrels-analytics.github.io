"use strict";(self.webpackChunksquirrels_docs=self.webpackChunksquirrels_docs||[]).push([[5480],{8452:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"docs/concepts/user","title":"User Model","description":"The User model in Squirrels allows you to customize the attributes associated with each user in your application. By extending the BaseUser class, you can define additional custom fields that will be stored in the authentication database used by your Squirrels project.","source":"@site/docs/docs/concepts/user.md","sourceDirName":"docs/concepts","slug":"/docs/concepts/user","permalink":"/docs/docs/concepts/user","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Connections","permalink":"/docs/docs/concepts/connections"},"next":{"title":"Widget Parameters","permalink":"/docs/docs/concepts/parameters"}}');var l=n(4848),r=n(8453);const d={},t="User Model",o={},a=[{value:"Configuration File",id:"configuration-file",level:2},{value:"Supported Field Types",id:"supported-field-types",level:2},{value:"Reserved and Disallowed Fields",id:"reserved-and-disallowed-fields",level:2},{value:"Dropping Columns",id:"dropping-columns",level:2},{value:"Best Practices",id:"best-practices",level:2}];function c(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"user-model",children:"User Model"})}),"\n",(0,l.jsxs)(s.p,{children:["The User model in Squirrels allows you to customize the attributes associated with each user in your application. By extending the ",(0,l.jsx)(s.code,{children:"BaseUser"})," class, you can define additional custom fields that will be stored in the authentication database used by your Squirrels project."]}),"\n",(0,l.jsx)(s.h2,{id:"configuration-file",children:"Configuration File"}),"\n",(0,l.jsxs)(s.p,{children:["Custom user fields are configured in the ",(0,l.jsx)(s.code,{children:"pyconfigs/user.py"})," file. You can create a sample of this file by using the ",(0,l.jsx)(s.a,{href:"../../references/cli/get-file",children:"sqrl get-file"})," command:"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"sqrl get-file user.py\n"})}),"\n",(0,l.jsx)(s.p,{children:"The contents of the example file looks like this:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-python",children:'from typing import Literal\nfrom squirrels import BaseUser\n\n\nclass User(BaseUser):\n    """\n    Extend the BaseUser class with custom attributes.\n    """\n    role: Literal["manager", "employee"] = "employee"\n\n    @classmethod\n    def dropped_columns(cls) -> list[str]:\n        return []\n'})}),"\n",(0,l.jsx)(s.h2,{id:"supported-field-types",children:"Supported Field Types"}),"\n",(0,l.jsx)(s.p,{children:"The User model supports the following field types:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"str"}),": Text fields"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"int"}),": Integer numbers"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"float"}),": Decimal numbers"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"bool"}),": Boolean values (True/False)"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"Literal"}),": Enumerated values with a fixed set of options"]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["To make a field nullable (allow NULL values), use the Union type syntax with ",(0,l.jsx)(s.code,{children:"None"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-python",children:"# Nullable string field with None as default value\norganization: str | None = None\n\n# Nullable integer field with default value of 10\nemployee_id: int | None = 10\n"})}),"\n",(0,l.jsxs)(s.p,{children:["Use the ",(0,l.jsx)(s.code,{children:"Literal"})," type from the ",(0,l.jsx)(s.code,{children:"typing"})," module to create fields with a fixed set of options:"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-python",children:'# Field that only accepts specific values\nrole: Literal["manager", "employee"] = "employee"\n'})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"All fields must have a default value."})," When adding a new field to the User model, the field for all existing users in the database will be set to the default value."]}),"\n",(0,l.jsxs)(s.admonition,{type:"note",children:[(0,l.jsxs)(s.p,{children:["If the ",(0,l.jsx)(s.code,{children:"SQRL_SECRET__ADMIN_PASSWORD"})," ",(0,l.jsx)(s.a,{href:"./environment",children:"environment variable"}),' is set, the "admin" user (i.e., username = "admin") will be created for you automatically using the default values from the User model.']}),(0,l.jsxs)(s.p,{children:['If the fields of the "admin" user should be different than the default values, you can change it in ',(0,l.jsx)(s.a,{href:"../concepts/studio",children:"Squirrels Studio"}),' ("Menu" -> "Manage Users") when authenticated as an admin user, or by using the ',(0,l.jsx)(s.a,{href:"../../references/rest/user-management#update-user-",children:"Update User"})," REST API."]})]}),"\n",(0,l.jsx)(s.h2,{id:"reserved-and-disallowed-fields",children:"Reserved and Disallowed Fields"}),"\n",(0,l.jsx)(s.p,{children:"The following fields are reserved and managed by the system:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"username"}),": Primary identifier for the user (string)"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"is_admin"}),": Boolean flag indicating administrator privileges"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"The following fields are disallowed and cannot be used in your User model:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"password"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"password_hash"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"created_at"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"token_id"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.code,{children:"exp"})}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"dropping-columns",children:"Dropping Columns"}),"\n",(0,l.jsxs)(s.p,{children:["If you need to remove previously defined columns, use the ",(0,l.jsx)(s.code,{children:"dropped_columns"})," class method:"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-python",children:'from squirrels import BaseUser\n\nclass User(BaseUser):\n    # ... other fields ...\n    old_field: str | None = None  # Although this line can be safely removed, it is included as a record of what was removed\n\n    @classmethod\n    def dropped_columns(cls) -> list[str]:\n    """\n    List columns that should be dropped from the database.\n    """\n    return ["old_field"]\n'})}),"\n",(0,l.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:"Always provide meaningful default values for required fields"}),"\n",(0,l.jsxs)(s.li,{children:["Use nullable fields (",(0,l.jsx)(s.code,{children:"Type | None"}),") when a field might not apply to all users"]}),"\n",(0,l.jsxs)(s.li,{children:["Consider using ",(0,l.jsx)(s.code,{children:"Literal"})," types to enforce valid options"]}),"\n",(0,l.jsx)(s.li,{children:"Document your User model fields with comments"}),"\n",(0,l.jsxs)(s.li,{children:["When removing fields, add them to ",(0,l.jsx)(s.code,{children:"dropped_columns()"})," rather than deleting them from the model"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>t});var i=n(6540);const l={},r=i.createContext(l);function d(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);
"use strict";(self.webpackChunksquirrels_docs=self.webpackChunksquirrels_docs||[]).push([[1376],{8146:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"references/python/auth/ProviderConfigs","title":"ProviderConfigs (class)","description":"This is a class that contains the configuration for third-party authentication providers (such as Google, Facebook, etc.) that implement the [OpenID Connect] protocol. It is returned by functions decorated with the [provider] decorator in [user.py].","source":"@site/docs/references/python/auth/ProviderConfigs.md","sourceDirName":"references/python/auth","slug":"/references/python/auth/ProviderConfigs","permalink":"/docs/references/python/auth/ProviderConfigs","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"references","previous":{"title":"provider (decorator function)","permalink":"/docs/references/python/auth/provider"},"next":{"title":"squirrels.parameter_options (module)","permalink":"/docs/references/python/parameter_options"}}');var i=n(4848),s=n(8453);const o={},c="ProviderConfigs (class)",l={},a=[{value:"Required Arguments",id:"required-arguments",level:2},{value:"client_id",id:"client_id",level:3},{value:"client_secret",id:"client_secret",level:3},{value:"server_metadata_url",id:"server_metadata_url",level:3},{value:"client_kwargs",id:"client_kwargs",level:3},{value:"get_user",id:"get_user",level:3},{value:"Example",id:"example",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"providerconfigs-class",children:"ProviderConfigs (class)"})}),"\n",(0,i.jsxs)(r.p,{children:["This is a class that contains the configuration for third-party authentication providers (such as Google, Facebook, etc.) that implement the ",(0,i.jsx)(r.a,{href:"https://openid.net/connect/",children:"OpenID Connect"})," protocol. It is returned by functions decorated with the ",(0,i.jsx)(r.a,{href:"./provider",children:"provider"})," decorator in ",(0,i.jsx)(r.a,{href:"../../../docs/concepts/user",children:"user.py"}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["Can be imported from the module ",(0,i.jsx)(r.code,{children:"squirrels.auth"})," or ",(0,i.jsx)(r.code,{children:"squirrels"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"required-arguments",children:"Required Arguments"}),"\n",(0,i.jsx)(r.h3,{id:"client_id",children:"client_id"}),"\n",(0,i.jsx)(r.p,{children:"The client ID obtained from the OpenID provider when registering your application."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Type:"})," ",(0,i.jsx)(r.code,{children:"str"})]}),"\n",(0,i.jsx)(r.h3,{id:"client_secret",children:"client_secret"}),"\n",(0,i.jsx)(r.p,{children:"The client secret obtained from the OpenID provider when registering your application."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Type:"})," ",(0,i.jsx)(r.code,{children:"str"})]}),"\n",(0,i.jsx)(r.h3,{id:"server_metadata_url",children:"server_metadata_url"}),"\n",(0,i.jsx)(r.p,{children:"The server metadata URL (well-known configuration endpoint) of the OpenID provider."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Type:"})," ",(0,i.jsx)(r.code,{children:"str"})]}),"\n",(0,i.jsx)(r.h3,{id:"client_kwargs",children:"client_kwargs"}),"\n",(0,i.jsx)(r.p,{children:"Additional client configuration parameters, typically including the scope for the authentication request."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Type:"})," ",(0,i.jsx)(r.code,{children:"dict"})]}),"\n",(0,i.jsx)(r.h3,{id:"get_user",children:"get_user"}),"\n",(0,i.jsx)(r.p,{children:"A function that maps the claims from the OpenID provider to a Squirrels User object. This function receives the claims dictionary from the provider and must return a User instance."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Type:"})," ",(0,i.jsx)(r.code,{children:"Callable[[dict], User]"})]}),"\n",(0,i.jsx)(r.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'@provider(name="google", label="Google", icon="https://www.google.com/favicon.ico")\ndef google_auth_provider(sqrl: AuthProviderArgs) -> ProviderConfigs:\n    """\n    Provider configs for authenticating a user using Google credentials.\n\n    See the following page for setting up the CLIENT_ID and CLIENT_SECRET for Google specifically: \n    https://support.google.com/googleapi/answer/6158849?hl=en\n    """\n    def get_sqrl_user(claims: dict) -> User:\n        return User(\n            username=claims["email"],\n            is_admin=False,\n            role="employee"\n        )\n\n    provider_configs = ProviderConfigs(\n        client_id=sqrl.env_vars["GOOGLE_CLIENT_ID"],\n        client_secret=sqrl.env_vars["GOOGLE_CLIENT_SECRET"],\n        server_metadata_url="https://accounts.google.com/.well-known/openid-configuration",\n        client_kwargs={"scope": "openid email profile"},\n        get_user=get_sqrl_user\n    )\n\n    return provider_configs\n'})})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>c});var t=n(6540);const i={},s=t.createContext(i);function o(e){const r=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);
"use strict";(self.webpackChunksquirrels_docs=self.webpackChunksquirrels_docs||[]).push([[2868],{6005:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var t=o(5893),r=o(1151);const i={},s="Deploy with Docker",c={id:"docs/topics/tips/deployment",title:"Deploy with Docker",description:'In the future, we intend to create our own Cloud platform to host Squirrels projects that comes with infrastructure built-in for "project version catalog" and maintaining stacks of minor versions. But for the time being, we recommend creating a Docker image, and deploying your image as a container on a hosting platform. Information on deploying Docker containers to your hosting platform is not provided on this page... See the docs for your hosting platform for more details.',source:"@site/versioned_docs/version-0.3.x/docs/topics/tips/deployment.md",sourceDirName:"docs/topics/tips",slug:"/docs/topics/tips/deployment",permalink:"/docs/docs/topics/tips/deployment",draft:!1,unlisted:!1,tags:[],version:"0.3.x",frontMatter:{},sidebar:"docs",previous:{title:"Versioning Best Practices",permalink:"/docs/docs/topics/tips/versioning"},next:{title:"Frontend Topics",permalink:"/docs/docs/frontend"}},a={},l=[];function d(e){const n={a:"a",code:"code",h1:"h1",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"deploy-with-docker",children:"Deploy with Docker"}),"\n",(0,t.jsx)(n.p,{children:'In the future, we intend to create our own Cloud platform to host Squirrels projects that comes with infrastructure built-in for "project version catalog" and maintaining stacks of minor versions. But for the time being, we recommend creating a Docker image, and deploying your image as a container on a hosting platform. Information on deploying Docker containers to your hosting platform is not provided on this page... See the docs for your hosting platform for more details.'}),"\n",(0,t.jsxs)(n.p,{children:['Typically, a file named "Dockerfile" is needed for creating docker images (which can be stored in your Squirrels project or somewhere in your server). There is no "one size fits all" for the contents of your Dockerfile since it depends on the Python version and package management tool that you use. Assuming Python version 3.11 and the dependencies of your project are provided in a ',(0,t.jsx)(n.code,{children:"requirements.txt"})," file that can be used for pip installs, the Dockerfile can look something like this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dockerfile",children:'# Change here to use different python version (ex. 3.12-slim for version 3.12)\nFROM python:3.11-slim\nWORKDIR /app\n\nCOPY requirements.txt .\nCOPY . .\n\n# Only needed if there are Python libraries installed from git in requirements.txt, \n# or for the "sqrl deps" command if there are packages defined in "squirrels.yml"\nRUN apt-get update && apt-get install -y git\n\nRUN pip install --no-cache-dir -r requirements.txt\n\nRUN sqrl deps\n\nCMD ["sqrl", "run", "--host", "0.0.0.0", "--port", "4465"]\n'})}),"\n",(0,t.jsxs)(n.p,{children:["You will want docker to ignore a few files and folders by adding them to ",(0,t.jsx)(n.code,{children:".dockerignore"})," file. The contents should looks similar to your ",(0,t.jsx)(n.code,{children:".gitignore"}),' file except you also want to include the ".git" directory.']}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"**/__pycache__/\n.venv/\n.git/\n\n# squirrels files to ignore\nenv.yml\ntarget/\nsqrl_packages/\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In addition to the docker image, a docker volume is also needed store the ",(0,t.jsx)(n.a,{href:"../environcfg",children:"env.yml"})," file. If your ",(0,t.jsx)(n.a,{href:"../environcfg",children:"env.yml"})," is in current directory, you can use the following ",(0,t.jsx)(n.code,{children:"compose.yml"})," file to create a docker container with the volume by running ",(0,t.jsx)(n.code,{children:"docker compose up"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"services:\n  squirrels:\n    build: /path/to/Dockerfile\n    ports:\n      - 8080:4465\n    volumes:\n      - ./env.yml:/app/env.yml\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1151:(e,n,o)=>{o.d(n,{Z:()=>c,a:()=>s});var t=o(7294);const r={},i=t.createContext(r);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);